Write a PL/SQL block for following requirements and handle the
exceptions. Roll no. of students will be entered by the user.
Attendance of roll no. entered by user will be checked in the
Stud table. If attendance is less than 75% then display the
message “Term not granted” and set the status in stud table as
“Detained”. Otherwise display message “Term granted” and set the
status in stud table as “Not Detained”
 Student (Roll, Name, Attendance ,Status)


CREATE TABLE Stud (
  Roll NUMBER PRIMARY KEY,
  Name VARCHAR2(100),
  Attendance NUMBER(5, 2), 
  Status VARCHAR2(20)
);

-- Sample Data
INSERT INTO Stud (Roll, Name, Attendance) VALUES (101, 'Student X', 85.00);
INSERT INTO Stud (Roll, Name, Attendance) VALUES (102, 'Student Y', 70.00);
INSERT INTO Stud (Roll, Name, Attendance) VALUES (103, 'Student Z', 74.99);
COMMIT;


SET SERVEROUTPUT ON;

DECLARE
  p_roll_no       Stud.Roll%TYPE := &p_roll_no;
  v_attendance    Stud.Attendance%TYPE;
  v_new_status    Stud.Status%TYPE;
  v_message       VARCHAR2(100);
  
BEGIN
  SELECT Attendance
  INTO v_attendance
  FROM Stud
  WHERE Roll = p_roll_no;
  
  IF v_attendance < 75 THEN
    v_message := 'Term not granted';
    v_new_status := 'Detained';
  ELSE
    v_message := 'Term granted';
    v_new_status := 'Not Detained';
  END IF;
  
  UPDATE Stud
  SET Status = v_new_status
  WHERE Roll = p_roll_no;
  
  DBMS_OUTPUT.PUT_LINE('Roll No: ' || p_roll_no);
  DBMS_OUTPUT.PUT_LINE('Attendance: ' || v_attendance || '%');
  DBMS_OUTPUT.PUT_LINE('Result: ' || v_message);
  DBMS_OUTPUT.PUT_LINE('Status Updated to: ' || v_new_status);
  
  COMMIT;

EXCEPTION
  WHEN NO_DATA_FOUND THEN
    DBMS_OUTPUT.PUT_LINE('Error: Roll number ' || p_roll_no || ' not found in the Stud table.');
    
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE('An unexpected error occurred: ' || SQLERRM);
    ROLLBACK;
END;
/
